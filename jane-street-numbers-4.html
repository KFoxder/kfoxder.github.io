<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>Jane Street Puzzle: Numbers 4</title><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Jane Street Puzzle: Numbers 4 | Kevin Fox</title>
<meta name="generator" content="Jekyll v3.9.3" />
<meta property="og:title" content="Jane Street Puzzle: Numbers 4" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Puzzles are fun! I hope I can continue to carve out time to solve them in the future…" />
<meta property="og:description" content="Puzzles are fun! I hope I can continue to carve out time to solve them in the future…" />
<link rel="canonical" href="https://kevinfox.dev/jane-street-numbers-4.html" />
<meta property="og:url" content="https://kevinfox.dev/jane-street-numbers-4.html" />
<meta property="og:site_name" content="Kevin Fox" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2024-06-01T00:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Jane Street Puzzle: Numbers 4" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2024-06-01T00:00:00+00:00","datePublished":"2024-06-01T00:00:00+00:00","description":"Puzzles are fun! I hope I can continue to carve out time to solve them in the future…","headline":"Jane Street Puzzle: Numbers 4","mainEntityOfPage":{"@type":"WebPage","@id":"https://kevinfox.dev/jane-street-numbers-4.html"},"url":"https://kevinfox.dev/jane-street-numbers-4.html"}</script>
<!-- End Jekyll SEO tag -->
<link type="application/atom+xml" rel="alternate" href="https://kevinfox.dev/feed.xml" title="Kevin Fox" /><link rel="shortcut icon" type="image/x-icon" href="/icon.png" />
  <link rel="stylesheet" href="/assets/css/main.css" />
<!-- Google tag (gtag.js) -->

   <script async src="https://www.googletagmanager.com/gtag/js?id=G-ECHQ861V1C"></script>

<script>
    window.dataLayer = window.dataLayer || [];

    function gtag() {
        dataLayer.push(arguments);
    }

    gtag('js', new Date());

    gtag('config', 'G-ECHQ861V1C');
</script>
</head>


<body a="light">
    <main class="page-content" aria-label="Content">
      <div class="w">
        <a href="/">Home</a><article>
  <p class="post-meta">
    <time datetime="2024-06-01 00:00:00 +0000">2024-06-01</time>
  </p>
  
  <h1>Jane Street Puzzle: Numbers 4</h1>

  <p>Puzzles are fun! I hope I can continue to carve out time to solve them in the future…</p>

<p>You can see my code here: <a href="https://github.com/KFoxder/jane_street_puzzle">Github Link</a></p>

<p><img src="/assets/js_numbers_4_solution.png" alt="Numbers 4 Solution" /></p>

<h3 id="solution">Solution</h3>

<p>The general solution I took was in 2 parts.</p>

<h4 id="part-1-find-all-possible-solutions-for-each-row">Part 1: Find all possible solutions for each row</h4>

<p>The bulk of the time is spent finding all possible solutions for each row taking into consideration possible shading, groups of cells, and validity of the clue. For example, if we look at row 4 in the 5 x 5 example we know we are looking for a cube. The number 12,167 is a cube however it would break the rules of groupings (columns 1 &amp; 2 are in the same group and thus need to have the same number). Therefore we can exclude 12,167 as a valid solution for row 4.</p>

<p>✅ Shading is valid <br />
✅ Clue is valid (12,167 is a cube)<br />
❌ Grouping is not valid (must be the same number)<br />
<img src="/assets/js_numbers_4_example_1.png" alt="" /></p>

<p>✅ Shading is valid <br />
✅ Clue is valid (27 and 64 are cubes)<br />
✅ Grouping is valid <br />
<img src="/assets/js_numbers_4_example_2.png" alt="" /></p>

<p>For certain rows, this can be very time-consuming because the validation function is expensive and because there are so many distinct groups that we can form many different numbers. The rows that take the longest in the 11 x 11 puzzle are row 5 and row 3 which take 90% of the time.</p>

<p>I did consider looking at rows relative to their ancestor above and backtracking but because it worked I didn’t have a ton of time to optimize I left it as is.</p>

<h4 id="part-2-find-a-valid-matrix">Part 2: Find a valid matrix</h4>

<p>Once we have all possible solutions to each row we “stitch” them together row by row to get a valid matrix that satisfies all the constraints. We start with one valid row and loop through the next row until we find a valid one and proceed down the tree of possibilities backtracking as we go. This is fast because we know the rows in isolation are valid but just check if the shaded cells are valid relative to each other and that groupings are valid relative to each row.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Row 1:            X 3 4 3 X
                      |
                    /  \
Row 1:      X 3 4 3 X   X 3 4 3 X
Row 2:      2 1 X 5 5   1 3 X 5 5
            (Invalid)    (Valid)
</code></pre></div></div>

<h5 id="notes--improvements">Notes &amp; Improvements</h5>

<ol>
  <li>Codifying the groups for the 11 x 11 matrix was exhausting. I tried to get ChatGPT to help me with it but sadly it failed over and over to be able to turn the matrix into grouped coordinates… ugh.</li>
  <li>My first attempt was to try and create all permutations of shaded regions and then fill in each row but that proved to be impossible so my final solution here was a realization that the hints could greatly narrow down the search space for each row based on groupings.</li>
  <li>My gut tells me there are faster ways to do this by not pre-computing each row which I thought about implementing but I didn’t want to put too much more time into this puzzle so I left it as is.</li>
</ol>


</article>
      </div>
    </main>
  </body>
</html>