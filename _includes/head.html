<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>
    {%- if page.title -%}
      {{ page.title }}
    {%- else -%}
      {{ site.title }}
    {%- endif -%}
  </title>

  {%-seo title=true-%}
  {%-feed_meta-%}

  <!-- DNS Prefetch for external resources -->
  <link rel="dns-prefetch" href="//www.googletagmanager.com" />
  <link rel="dns-prefetch" href="//api.mapbox.com" />

  <!-- Preload main stylesheet -->
  <link rel="preload" href="{{ "/assets/css/main.css" | relative_url }}" as="style" />

  <!-- Critical CSS - Inlined for fast first paint -->
  <style>
    :root{--color-bg:#fff;--color-text:#212529;--color-accent:#0066cc;--max-width-content:650px}
    @media(prefers-color-scheme:dark){:root{--color-bg:#1a1a1a;--color-text:#e8e8e8;--color-accent:#6db3f2}}
    body{background-color:var(--color-bg);color:var(--color-text);font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;font-size:16px;line-height:1.6;max-width:var(--max-width-content);margin:0 auto;padding:1.5rem}
    a{color:var(--color-accent);text-decoration:none}
    h1,h2,h3{line-height:1.3}
  </style>

  <link rel="shortcut icon" type="image/x-icon" href="{{ site.favicon | relative_url }}" />
  <link rel="stylesheet" href="{{ "/assets/css/main.css" | relative_url }}" />

  <!-- Google Analytics - Deferred for performance -->
  {% if jekyll.environment == "production" %}
  <script>
    // Defer GA loading until after page load
    window.addEventListener('load', function() {
      var ga = document.createElement('script');
      ga.async = true;
      ga.src = 'https://www.googletagmanager.com/gtag/js?id=G-ECHQ861V1C';
      document.head.appendChild(ga);
    });

    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-ECHQ861V1C');
  </script>
  {% else %}
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
  </script>
  {% endif %}
</head>
